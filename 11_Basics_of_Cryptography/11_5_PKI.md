| **Inicio**         | **atr√°s 4**                               | **Siguiente 6**             |
| ------------------ | ----------------------------------------- | --------------------------- |
| [üè†](../README.md) | [‚è™](./11_4_Private_Key_vs_Public_Key.md) | [‚è©](./11_6_Obfuscation.md) |

---

## **√çndice**

| Temario                                                                                                                                        |
| ---------------------------------------------------------------------------------------------------------------------------------------------- |
| [341. ¬øQu√© es PKI?](#341-qu√©-es-pki)                                                                                                           |
| [342. ¬øQu√© es la infraestructura de clave p√∫blica (PKI) y c√≥mo funciona?](#342-qu√©-es-la-infraestructura-de-clave-p√∫blica-pki-y-c√≥mo-funciona) |
|                                                                                                                                                |

# **PKI**

## **341. ¬øQu√© es PKI?**

![PKI](/img/11_Basics_of_Cryptography/PKI.png "PKI")

**PKI (Public Key Infrastructure, Infraestructura de Clave P√∫blica)** es el **conjunto de tecnolog√≠as, pol√≠ticas, roles y procedimientos** que permiten:

- Emitir certificados digitales,
- Gestionar claves criptogr√°ficas,
- Validar identidades,
- Garantizar **confidencialidad, integridad, autenticidad y no repudio** en las comunicaciones.

üëâ Ejemplo:

Cuando entras a un sitio web con **HTTPS**, el navegador conf√≠a en un certificado emitido por una **Autoridad de Certificaci√≥n (CA)** que forma parte de la PKI global.

### ¬øQu√© es el robo de una autoridad de certificaci√≥n o de una clave privada ra√≠z?

Una **CA (Certificate Authority)** tiene una **clave privada ra√≠z** que sirve para firmar y validar certificados.
Si un atacante roba esa clave privada:

- Puede emitir certificados falsos que los sistemas y navegadores **aceptar√°n como v√°lidos**.
- B√°sicamente se puede hacer pasar por cualquier sitio web (Google, bancos, correo, etc.).

üëâ Ejemplo:

En 2011, la CA **DigiNotar** fue comprometida y los atacantes emitieron certificados falsos para Google, Yahoo y otros servicios. Esto permiti√≥ espionaje masivo en Ir√°n.

### ¬øQu√© es una separaci√≥n (segregaci√≥n) inadecuada de funciones para las PKI?

En una PKI hay diferentes funciones:

- **Emisi√≥n de certificados**
- **Validaci√≥n/revocaci√≥n**
- **Administraci√≥n de usuarios**
- **Auditor√≠a y control**

Si no hay **segregaci√≥n adecuada** (es decir, distintas personas/sistemas con distintos privilegios), un solo administrador podr√≠a:

- Emitir certificados falsos sin supervisi√≥n,
- Modificar registros de auditor√≠a,
- O esconder actividades maliciosas.

üëâ Ejemplo:

Un administrador con privilegios completos en la PKI podr√≠a crear un certificado v√°lido para s√≠ mismo y usarlo para descifrar comunicaciones cifradas, sin que nadie lo detecte.

### ¬øQu√© es la escalabilidad insuficiente en una PKI?

Una PKI debe manejar **miles o millones de certificados**, su emisi√≥n, renovaci√≥n, revocaci√≥n y validaci√≥n.

Si no est√° dise√±ada para escalar:

- Puede **colapsar bajo la carga** de solicitudes.
- Retrasar validaciones de certificados.
- Interrumpir servicios cr√≠ticos (ej. banca online, gobierno digital).

üëâ Ejemplo:

Una empresa peque√±a con un sistema PKI casero podr√≠a funcionar con 100 usuarios, pero si crece a 50,000 empleados y dispositivos IoT, el sistema podr√≠a volverse ineficiente, causando fallas en la autenticaci√≥n y en las conexiones seguras.

### ¬øQu√© es la subversi√≥n de la validaci√≥n de certificados en l√≠nea?

La validaci√≥n de certificados (OCSP, CRL) permite verificar si un certificado sigue siendo **v√°lido o revocado**.

La **subversi√≥n** ocurre cuando:

- El sistema que valida certificados en l√≠nea es manipulado para **aceptar certificados revocados**.
- Se inyectan respuestas falsas (ej. ataques de hombre en el medio).
- O los clientes se configuran para ignorar la validaci√≥n.

üëâ Ejemplo:

Si un certificado comprometido para un banco fue revocado, pero el navegador acepta una **respuesta OCSP falsa**, el atacante puede seguir usando el certificado robado como si fuera leg√≠timo.

### ¬øQu√© es la falta de confianza y el no repudio en una PKI?

- **Falta de confianza**:

  Cuando los usuarios o sistemas no creen que la PKI sea confiable.
  Puede pasar por:

  - Esc√°ndalos de CA comprometidas,
  - Certificados emitidos incorrectamente,
  - Pol√≠ticas poco claras de gesti√≥n.

- **No repudio**:

  Es la garant√≠a de que alguien **no puede negar haber realizado una acci√≥n** (ej. firmar un documento digital).
  Si la PKI no asegura no repudio:

  - El titular de un certificado puede **negar que firm√≥ un contrato digital**.
  - No hay trazabilidad ni auditor√≠a para demostrar la autenticidad.

üëâ Ejemplo:

Un proveedor firma un contrato digital con un certificado emitido por una PKI d√©bil. M√°s tarde niega haberlo hecho, y como la PKI no tiene **registros de auditor√≠a s√≥lidos ni pruebas t√©cnicas de la firma**, el documento queda en disputa legal.

‚úÖ **En resumen**:

1. **PKI** = infraestructura que da soporte a certificados y claves p√∫blicas/privadas.
2. **Robo de una CA o clave ra√≠z** = el atacante puede emitir certificados falsos para cualquier sitio.
3. **Segregaci√≥n inadecuada** = un solo actor puede abusar del sistema sin control.
4. **Escalabilidad insuficiente** = PKI colapsa si crece mucho.
5. **Subversi√≥n de validaci√≥n** = certificados revocados aceptados como v√°lidos.
6. **Falta de confianza y no repudio** = usuarios no conf√≠an en la PKI y las firmas digitales pierden valor legal.

---

[üîº](#√≠ndice)

---

## **342. ¬øQu√© es la infraestructura de clave p√∫blica (PKI) y c√≥mo funciona?**

### 1. ¬øQu√© es la Infraestructura de Clave P√∫blica (PKI)?

La **PKI (Public Key Infrastructure)** es un **conjunto de tecnolog√≠as, pol√≠ticas, est√°ndares, procedimientos y roles** que permiten gestionar certificados digitales y claves criptogr√°ficas de forma segura.

Su prop√≥sito principal es:

- **Autenticar identidades** (personas, servidores, aplicaciones, dispositivos IoT, etc.)
- **Proteger las comunicaciones** (confidencialidad e integridad)
- **Garantizar el no repudio** (una acci√≥n digital no puede ser negada por quien la realiz√≥).

üëâ **Ejemplo cotidiano**:

Cuando entras a un sitio web con **HTTPS**, tu navegador conf√≠a en un **certificado digital** emitido por una CA (Autoridad de Certificaci√≥n) que forma parte de una PKI.

### 2. Entendiendo c√≥mo funciona la PKI

El funcionamiento de la PKI se basa en la **criptograf√≠a de clave p√∫blica (asim√©trica)**.

- Cada entidad tiene un **par de claves**:

  - **Clave p√∫blica** ‚Üí compartida libremente.
  - **Clave privada** ‚Üí mantenida en secreto.

- El **certificado digital** vincula la clave p√∫blica con la identidad del propietario (ejemplo: dominio web, persona o empresa).

#### Flujo b√°sico:

1. **Generaci√≥n de claves** ‚Üí la entidad crea su par de claves.
2. **Solicitud de certificado (CSR)** ‚Üí se pide a una CA que firme un certificado con la clave p√∫blica.
3. **Emisi√≥n del certificado** ‚Üí la CA valida identidad y firma el certificado digital.
4. **Distribuci√≥n** ‚Üí el certificado p√∫blico se entrega a clientes/usuarios.
5. **Validaci√≥n** ‚Üí los clientes verifican que el certificado sea v√°lido (firmado por una CA confiable, no caducado, no revocado).
6. **Uso** ‚Üí con ese certificado, se establece comunicaci√≥n cifrada y autenticada (ej. TLS, correo seguro, firma digital).

### 3. Certificados PKI

Un **certificado digital PKI** es un archivo electr√≥nico que:

- Contiene la **clave p√∫blica** del titular.
- Identifica a su due√±o (nombre, dominio, organizaci√≥n).
- Tiene una fecha de validez.
- Est√° firmado por una **CA confiable**.

üëâ Ejemplo real de un certificado HTTPS:

- Dominio: `www.banco.com`
- Clave p√∫blica: asociada al servidor
- Emitido por: DigiCert (CA reconocida)
- Vigencia: 2025-2026
- Uso: autenticaci√≥n y cifrado de sesiones TLS

### 4. ¬øPor qu√© se utiliza PKI?

La PKI se usa porque proporciona **seguridad confiable en entornos digitales**. Sus beneficios principales son:

‚úÖ **Autenticaci√≥n** ‚Üí demostrar que una entidad es quien dice ser.

‚úÖ **Confidencialidad** ‚Üí cifrar comunicaciones (ej. HTTPS, VPN).

‚úÖ **Integridad** ‚Üí asegurar que los datos no fueron modificados.

‚úÖ **No repudio** ‚Üí las firmas digitales garantizan responsabilidad legal.

üëâ Aplicaciones reales:

- HTTPS / SSL / TLS en la web.
- Firmas digitales en correos electr√≥nicos (S/MIME).
- Autenticaci√≥n en VPNs.
- Dispositivos IoT con certificados para conectarse a la nube.
- Firma de software para evitar malware.

### 5. Tipos de PKI de c√≥digo abierto

Existen implementaciones **open source** que permiten a empresas y desarrolladores crear su propia PKI. Algunos ejemplos:

- **OpenSSL** ‚Üí librer√≠a criptogr√°fica y herramienta para generar certificados.
- **EJBCA** ‚Üí plataforma PKI empresarial muy completa (Java).
- **Dogtag Certificate System** ‚Üí PKI empresarial respaldada por Red Hat.
- **CFSSL (CloudFlare‚Äôs PKI toolkit)** ‚Üí ligera, usada para entornos cloud.
- **TinyCA** ‚Üí herramienta sencilla para gestionar certificados en entornos peque√±os.

üëâ Ejemplo de uso:

En un laboratorio interno, una empresa puede montar **EJBCA** para emitir certificados internos que autentiquen a sus empleados en la VPN corporativa.

‚úÖ **En resumen**:

La **PKI** es la base de la seguridad en internet y empresas. Permite generar confianza digital mediante certificados que autentican identidades y protegen la informaci√≥n. Funciona con criptograf√≠a asim√©trica, CA confiables y certificados digitales.

---

[üîº](#√≠ndice)

---

| **Inicio**         | **atr√°s 4**                               | **Siguiente 6**             |
| ------------------ | ----------------------------------------- | --------------------------- |
| [üè†](../README.md) | [‚è™](./11_4_Private_Key_vs_Public_Key.md) | [‚è©](./11_6_Obfuscation.md) |
